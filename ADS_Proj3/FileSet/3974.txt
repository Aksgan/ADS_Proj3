from a private PC or a mobile phone: the user uses his corporate email address but may use a different outgoing SMTP server not passed by the SPF record. The corporate domain may have won by blocking all email that does not originate from themselves, but have thereby limited their own users. Many organizations consider this compromise acceptable and even desirable. SPF PASS is useful for authenticating the domain for use as a parameter to a spam classification engine. That is, the domain in the sender address can be considered to be authentic if the originating IP yields an SPF PASS. The domain can then be referenced against a reputation database. SPF results other than PASS (used ''in combination with'' a reputation system) and FAIL do not provide meaning because it is easy for anyone to create a broad SPF record for any domain that they own and from which they intend to send email. The meaning of PASS, SOFTFAIL, FAIL is sometimes incorrectly interpreted to mean "not-spam", "maybe-spam", "spam" respectively. However SPF does nothing of the sort. SPF merely offers an organization firstly the means to classify them based on their domain name instead of their IP address (SPF PASS); and secondly, the means to block unauthorized use of their domain (SPF FAIL). ===Intra-domain forgery=== SPF does not prevent a user with the same domain sending an email on behalf of another user since only the domain part of the address is considered by SPF. ===Header verification=== SPF does not verify any of the email header fields that may be displayed to the user by their email client software. For this, see [[Sender ID]] below. ===Checkpoints=== SPF needs to operate on the host indicated by the receiving domain's MX record. This means the host(s) that are the direct recipient of remote TCP connections; since such a host can easily deduce the originating IP address from the TCP session. These hosts are able to block the email directly in the envelope, avoiding bounce messages and their inherent problems. Other downstream hosts, for instance in a forwarding scenario, can only perform SPF checks based on "Received" headers. This is cumbersome and error-prone. ===DoS attack=== An Internet draft<ref>[http://tools.ietf.org/html/draft-otis-spf-dos-exploit SPF DoS Exploitation] (expired Internet draft)</ref> discussed concerns related to the scale of an SPF answer leading to network exploits as a means to corrupt the DNS. This issue is also covered in the security considerations of the SPF RFC. The SPF project did a detailed analysis <ref>[http://www.openspf.org/draft-otis-spf-dos-exploit_Analysis OpenSPF analysis of the DoS attack draft]</ref> of this draft and claimed that SPF does not pose any unique threat of DNS DoS. ===Relationship with DKIM=== SPF validates the message ''envelope'' (the SMTP [[bounce address]]), not the message ''contents'' (header and body) â€“ this is the distinction between SMTP (as specified in [[Internet standard|STD]] 10 or RFC 5321) and [[Internet Message Format]] (as specified in STD 11 or RFC 5322). It is orthogonal and complementary to [[DomainKeys Identified Mail]] (DKIM), which signs the contents (including headers). In brief, SPF validates MAIL FROM vs. its source server; DKIM validates "From:" by cryptographic means. ===Sender ID=== [[Sender ID]] RFC 4406, is a more recent solution to the problem of message validation, and defines a pair of closely-related tests. One validates a message's Purported Responsible Address (PRA) as defined in RFC 4407. The other validates a message's Reverse-Path (also known as MAIL-FROM address) as defined in RFC 4408. Quoting from RFC4407: "Note that the Sender ID experiment may use DNS records that may have been created for the current SPF experiment or earlier versions in this set of experiments. Depending on the content of the record, this may mean that sender-ID heuristics would be applied incorrectly to a message. Depending on the actions associated by the recipient with those heuristics, the message may not be delivered or may be discarded on receipt." Those publishing SPF DNS records should consider the advice given in section 3.4 of RFC 4406 and may wish to publish both v=spf1 and spf2.0 records to avoid the conflict. ===Wide-mask vulnerability=== Some spammers use SPF to decrease spam-rating by specifying wide mask in valid server address, so any spam from botnets becomes spf-valid and probability to pass spam-filters increases seminar-for-you.ru. 14400 IN TXT "v=spf1 a mx ip4:55.11.65.20/2 ip4:90.2.123.112/2 ip4:176.33.87.19/2 ip4:212.63.89.33/2 -all" worldwidemail.ru. 13733 IN TXT "v=spf1 a mx ip4:55.11.65.20/2 ip4:90.2.123.112/2 ip4:176.33.87.19/2 ip4:212.63.89.33/2 -all" example.com. 21600 IN SPF "v=spf1 +all" This last record says that '''any''' host on the Internet may send mail on behalf of the domain/hostname example.com. Although syntactically valid, "+all" is indicative of an administrator who does not care about SPF or the mail forgeries it detects. ==History== The idea to limit by IP address who could send mail using a given sender domain may date back as far as 1997. The first public mention of the concept was in 2000 but went mostly unnoticed. No mention was made of the concept again until a first attempt at an SPF-like specification was published in 2002 on the [[IETF]] "namedroppers" mailing list by David Green-Lank (formerly David Green), who was unaware of the 2000 mention of the idea. The very next day, [[Paul Vixie]] posted his own SPF-like specification on the same list. These posts ignited a lot of interest, and eventually led to the forming of the IETF Anti-Spam Research Group (ASRG) and their mailing list, where the SPF idea was debated among a subscriber base that seemed to grow exponentially day by day. Among the proposals submitted to the ASRG were "Reverse [[MX record|MX]]" by Hadmut Danisch, and "Designated Mailer Protocol" by Gordon Fecyk.<ref>{{cite web |url=http://www.openspf.org/History/Pre-SPF |title=SPF: History/Pre-SPF |accessdate=16 May 2009 }}</ref> In June 2003, [[Meng Weng Wong]] merged the RMX and DMP specifications<ref>For a comparison among RMX, DMP and SPF, see [http://old.openspf.org/dmpvsrmx.html RMX and DMP compared] on the historical openspf site.</ref> and solicited suggestions from other programmers. Over the next six months, a large number of changes were made and a large community had started working on SPF.<ref>{{cite web |url=http://www.openspf.org/History/SPF-2003 |title=SPF: History/SPF-2003 