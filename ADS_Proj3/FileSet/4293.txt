Published by Elsevier, 2002, ISBN 0444511040, 9780444511041 [[Category:Geometric algorithms]] [[Category:Computer-aided design]]</text> </page> <page> <id>36235</id> <title>Surface caching</title> <text>{{orphan|date=January 2010}} {{Context|date=October 2009}} '''Surface caching''' is a computer graphics technique pioneered by [[John D. Carmack|John Carmack]], first used in the computer game ''[[Quake computer game|Quake]]''. The traditional method of lighting a surface is to calculate the surface from the perspective of the viewer, and then apply the lighting to the surface. Carmack's technique is to light the surface independent of the viewer, and store that surface in a cache. The lighted surface can then be used in the normal rendering pipeline for any number of frames. Surface caching is one of the reasons that it became practical to make a true 3D game that was reasonably fast on a [[Pentium compatible processor|Pentium]] microprocessor{{Citation needed|date=April 2008}}. == External links == * ''[http://www.bluesnews.com/abrash/chap68.shtml Quake's Lighting Model: Surface Caching]'' - an in-depth explanation by [[Michael Abrash]] [[Category:3D computer graphics]] [[Category:Video game software]] {{videogame-software-stub}}</text> </page> <page> <id>36236</id> <title>Surface normal</title> <text>{{Redirect|Normal vector|a normalized vector, or vector of length one|unit vector}} [[Image:Normal vectors2.svg|thumb|right|A polygon and two of its normal vectors]] [[Image:Surface normal illustration.png|right|thumb|A normal to a surface at a point is the same as a normal to the tangent plane to that surface at that point.]] A '''surface normal''', or simply '''normal''', to a [[Flatness|flat surface]] is a [[vector (geometry)|vector]] that is [[perpendicular]] to that surface. A normal to a non-flat surface at a [[point (geometry)|point]] ''P'' on the surface is a vector perpendicular to the [[Tangent space|tangent plane]] to that surface at ''P''. The word "normal" is also used as an adjective: a [[line (geometry)|line]] normal to a [[plane (geometry)|plane]], the normal component of a [[force]], the '''normal vector''', etc. The concept of '''normality''' generalizes to [[orthogonality]]. In the two-dimensional case, a '''normal line''' perpendicularly intersects the [[tangent line]] to a curve at a given point. The '''normal''' is often used in [[computer graphics]] to determine a surface's orientation toward a light source for [[flat shading]], or the orientation of each of the corners ([[vertex (geometry)|vertices]]) to mimic a curved surface with [[Phong shading]]. ==Calculating a surface normal== For a [[Convex set|convex]] [[polygon]] (such as a [[triangle (geometry)|triangle]]), a surface normal can be calculated as the vector [[cross product]] of two (non-parallel) edges of the polygon. For a [[Plane (mathematics)|plane]] given by the equation <math>ax+by+cz+d=0</math>, the vector <math>(a, b, c)</math> is a normal. For a plane given by the equation '''r''' = '''a''' + α'''b''' + β'''c''', where '''a''' is a vector to get onto the plane and '''b''' and '''c''' are non-parallel vectors lying on the plane, the normal to the plane defined is given by '''b''' &times; '''c''' (the cross product of the vectors lying on the plane). For a [[hyperplane]] in ''n''+1 dimensions, given by the equation '''r''' = '''a'''<sub>0</sub> + α<sub>1</sub>'''a'''<sub>1</sub> + α<sub>2</sub>'''a'''<sub>2</sub> + ... + α<sub>''n''</sub>'''a'''<sub>''n''</sub>, where '''a'''<sub>0</sub> is a vector to get onto the hyperplane and '''a'''<sub>''i''</sub> for ''i'' = 1, ... , ''n'' are non-parallel vectors lying on the hyperplane, the (unscaled) normal to the hyperplane can be approximated by <math>(AA^T + bb^T)^{-1} b</math> where '''A''' = ['''a'''<sub>''1''</sub>, '''a'''<sub>''2''</sub>, ... , '''a'''<sub>''n''</sub>] and '''b''' is an arbitrary vector in the space ''not'' in the linear span of '''a'''<sub>''i''</sub>. If a (possibly non-flat) surface ''S'' is [[Coordinate system|parameterized]] by a system of [[curvilinear coordinates]] '''x'''(''s'', ''t''), with ''s'' and ''t'' [[real number|real]] variables, then a normal is given by the cross product of the [[partial derivative]]s :<math>{\partial \mathbf{x} \over \partial s}\times {\partial \mathbf{x} \over \partial t}.</math> If a surface ''S'' is given [[Implicit function|implicitly]] as the set of points <math>(x, y, z)</math> satisfying <math>F(x, y, z)=0</math>, then, a normal at a point <math>(x, y, z)</math> on the surface is given by the [[gradient]] :<math>\nabla F(x, y, z).</math> since [[Level set#Level sets versus the gradient|the gradient at any point is perpendicular to the level set]], and <math>F(x, y, z)=0</math> (the surface) is a level set of <math>F</math>. For a surface ''S'' given [[Explicit function|explicitly]] as a [[Function (mathematics)|function]] <math>f(x, y)</math> of the independent variables <math>x, y</math> (e.g., <math>f(x, y) = a_{00} + a_{01} y + a_{10} x + a_{11} x y</math>), its normal can be found in at least two equivalent ways. The first one is obtaining its implicit form <math>F(x, y, z) = z - f(x,y) = 0</math>, from which the normal follows readily as the [[gradient]] <math>\nabla F(x, y, z)</math>. (Notice that the implicit form could be defined alternatively as <math>F(x, y, z) = f(x,y) - z</math>; these two forms correspond to the interpretation of the surface being [[Orientability|oriented]] upwards or downwards, respectively, as a consequence of the difference in the sign of the partial derivative <math>\partial{F}/\partial{z}</math>.) The second way of obtaining the normal follows directly from the gradient of the explicit form, <math>\nabla f(x, y)</math>; it is apparent from inspection that <math>\nabla F(x, y, z) = \hat{\mathbf{k}} - \nabla f(x, y)</math>, where <math>\hat{\mathbf{k}}</math> is the upward [[unit vector]]. If a surface does not have a tangent plane at a point, it does not have a normal at that point either. For example, a [[cone (geometry)|cone]] does not have a normal at its tip nor does it have a normal along the edge of its base. However, the normal to the cone is defined [[almost everywhere]]. In general, it is possible to define a normal almost everywhere for a surface that is [[Lipschitz continuous]]. ==Hypersurfaces in ''n''-dimensional space== The definition of a normal to a surface in three-dimensional space can be extended to <math>n-1</math>-dimensional [[hypersurface]]s in a <math>n</math>-dimensional space. A ''hypersurface'' may be [[Local_property|locally]] defined implicitly as the set of points <math>\scriptstyle(x_1, x_2, \ldots, x_n)</math> satisfying an equation <math>\scriptstyle F(x_1, x_2, \ldots x_n) = 0</math>, where <math>F</math> is a given [[Scalar field|scalar function]]. If <math>F</math> is [[continuously differentiable]], then the hypersurface obtained is a [[differentiable manifold]], and its hypersurface normal can be obtained from the [[gradient]] of <math>F</math>, in the case it is not null, by the following formula :<math>\nabla F(x_1, x_2, \ldots, x_n) = \left( \tfrac{\partial F}{\partial x_1}, \tfrac{\partial F}{\partial 