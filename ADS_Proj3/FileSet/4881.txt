SDRAM's activate command, specifying a row address to be loaded into the bank's sense amplifier array. To save power, a chip may be configured to only activate a portion of the sense amplifier array. In this case, the SR1..0 bits specify the half or quarter of the row to activate, and following read/write commands' column addresses are required to be limited to that portion. (Refresh operations always use the full row.) ===Read/write commands=== These operate analogously to a standard SDRAM's read or write commands, specifying a column address. Data is provided to the chip a few cycles after a write command (typically 3), and is output by the chip several cycles after a read command (typically 6). Just as with other forms of SDRAM, the DRAM controller is responsible for ensuring that the data bus is not scheduled for use in both directions at the same time. Data is always transferred in 16-transfer bursts, lasting 2 clock cycles. Thus, for a ×16 device, 256 bits (32 bytes) are transferred per burst. If the chip is using a data bus less than 16 bits wide, one or more of the sub-column address bits are used to select the portion of the column to be presented on the data bus. If the data bus is 8 bits wide, SC3 is used to identify which half of the read data to access; if the data bus is 4 bits wide, SC3 and SC2 are used, etc. Unlike conventional SDRAM, there is no provision for choosing the order in which the data is supplied within a burst. Thus, it is not possible to perform critical-word-first reads. ==== Masked write command ==== The masked write command is similar to a normal write, but no command delay is permitted and a mask byte is supplied, which permits controlling which 8-bit field . This is ''not'' a bitmap indicating which bytes are to be written; it would not be large enough for the 32 bytes in a write burst. Rather, it is a bit pattern which the DRAM controller fills unwritten bytes with. The DRAM controller is responsible for finding a pattern which does not appear in the other bytes that are to be written. Because there are 256 possible patterns and only 32 bytes in the burst, it is straightforward to find one. Even when multiple devices are connected in parallel, a mask byte can always be found when the bus is at most 128 bits wide. (This would produce 256 bytes per burst, but a masked write command is only used if at least one of them is not to be written.) Each byte is the 8 consecutive bits transferred across one data line during a particular clock cycle. M0 is matched to the first data bit transferred during a clock cycle, and M7 is matched to the last bit. This convention also interferes with performing critical-word-first reads; and word must include bits from at least the first 8 bits transferred. === Precharge/refresh command === This command is similar to a combination of a conventional SDRAM's precharge and refresh commands. The POP''x'' and BP''x'' bits specify a precharge operation, while the ROP''x'', DELR''x'', and BR''x'' bits specify a refresh operation. Each may be separately enabled. If enabled, each may have a different command delay and must be addressed to a different bank. Precharge commands may only be sent to one bank at a time; unlike a conventional SDRAM, there is no "precharge all banks" command. Refresh commands are also different from a conventional SDRAM. There is no "refresh all banks" command, and the refresh operation is divided into separate activate and precharge operations so the timing is determined by the memory controller. The refresh counter is also programmable by the controller. Operations are: * '''000: NOPR''' Perform no refresh operation * '''001: REFP''' Refresh precharge; end the refresh operation on the selected bank. * '''010: REFA''' Refresh activate; activate the row selected by the REFH/M/L register and selected bank for refresh. * '''011: REFI''' Refresh & increment; as for REFA, but also increment the REFH/M/L register. * '''100: LRR0''' Load refresh register low; copy RQ7–0 to the low 8 bits of the refresh counter REFL. No command delay. * '''101: LRR1''' Load refresh register middle; copy RQ7–0 to the middle 8 bits of the refresh counter REFM. No command delay. * '''110: LRR2''' Load refresh register high; copy RQ7–0 to the high 8 bits of the refresh counter REFH (if implemented). No command delay. * '''111''' ''reserved'' === Calibrate/powerdown command === This command performs a number of miscellaneous functions, as determined by the XOP''x'' field. Although there are 16 possibilities, only 4 are actually used. Three subcommands start and stop output driver calibration (which must be performed periodically, every 100 ms). The fourth subcommand places the chip in power-down mode. In this mode, it performs internal refresh and ignores the high-speed data lines. It must be woken up using the low-speed serial bus. == Low-speed serial bus == XDR DRAMs are probed and configured using a low-speed serial bus. The RST, SCK, and CMD signals are driven by the controller to every chip in parallel. The SDI and SDO lines are daisy-chained together, with the last SDO output connected to the controller, and the first SDI input tied high (logic 0). On reset, each chip drives its SDO pin low (1). When reset is released, a series of SCK pulses are sent to the chips. Each chip drives its SDO output high (0) one cycle after seeing its SDI input high (0). Further, it counts the number of cycles that elapse between releasing reset and seeing its SDI input high, and copies that count to an internal chip ID register. Commands sent by the controller over the CMD line include an address which must match the chip ID field. === General structure of commands === Each command either reads or writes a single 8-bit register, using an 8-bit address. This allows up to 256 registers, 