:<math>\begin{bmatrix} 1- 2(q_2^2 + q_3^2) & 2(q_1 q_2 - q_0 q_3) & 2(q_0 q_2 + q_1 q_3) \\ 2(q_1 q_2 + q_0 q_3) & 1 - 2(q_1^2 + q_3^2) & 2(q_2 q_3 - q_0 q_1) \\ 2(q_1 q_3 - q_0 q_2) & 2( q_0 q_1 + q_2 q_3) & 1 - 2(q_1^2 + q_2^2) \end{bmatrix}</math> or equivalently, by the [[Homogeneous_coordinates|homogeneous]] expression :<math>\begin{bmatrix} q_0^2 + q_1^2 - q_2^2 - q_3^2 & 2(q_1 q_2 - q_0 q_3) & 2(q_0 q_2 + q_1 q_3) \\ 2(q_1 q_2 + q_0 q_3) & q_0^2 - q_1^2 + q_2^2 - q_3^2 & 2(q_2 q_3 - q_0 q_1) \\ 2(q_1 q_3 - q_0 q_2) & 2( q_0 q_1 + q_2 q_3) & q_0^2 - q_1^2 - q_2^2 + q_3^2 \end{bmatrix}</math> If <math>q_0+iq_1+jq_2+kq_3</math> is not a unit quaternion then the homogeneous form is still a scalar multiple of a rotation matrix, while the inhomogeneous form is in general no longer an orthogonal matrix. This is why in numerical work the homogeneous form is to be preferred if distortion is to be avoided. The [[orthogonal matrix]] (post-multiplying a column vector) corresponding to a clockwise/[[Right-hand_rule|left-handed]] rotation with [[Euler angles]] <math>\phi, \theta, \psi</math>, with '''x-y-z''' convention, is given by: :<math>\begin{bmatrix} \cos\theta \cos\psi & -\cos\phi \sin\psi + \sin\phi \sin\theta \cos\psi & \sin\phi \sin\psi + \cos\phi \sin\theta \cos\psi \\ \cos\theta \sin\psi & \cos\phi \cos\psi + \sin\phi \sin\theta \sin\psi & -\sin\phi \cos\psi + \cos\phi \sin\theta \sin\psi \\ -\sin\theta & \sin\phi \cos\theta & \cos\phi \cos\theta \\ \end{bmatrix}</math> ==== Conversion ==== By combining the quaternion representations of the Euler rotations we get :<math>\mathbf{q} = R_z(\psi)R_y(\theta)R_x(\phi) = [\cos (\psi /2) + \mathbf{k}\sin (\psi /2)][\cos (\theta /2) + \mathbf{j}\sin (\theta /2)][\cos (\phi /2) + \mathbf{i}\sin (\phi /2)] </math> :<math> \mathbf{q} = \begin{bmatrix} \cos (\phi /2) \cos (\theta /2) \cos (\psi /2) + \sin (\phi /2) \sin (\theta /2) \sin (\psi /2) \\ \sin (\phi /2) \cos (\theta /2) \cos (\psi /2) - \cos (\phi /2) \sin (\theta /2) \sin (\psi /2) \\ \cos (\phi /2) \sin (\theta /2) \cos (\psi /2) + \sin (\phi /2) \cos (\theta /2) \sin (\psi /2) \\ \cos (\phi /2) \cos (\theta /2) \sin (\psi /2) - \sin (\phi /2) \sin (\theta /2) \cos (\psi /2) \\ \end{bmatrix}</math> For Euler angles we get: :<math>\begin{bmatrix} \phi \\ \theta \\ \psi \end{bmatrix} = \begin{bmatrix} \mbox{arctan} \frac {2(q_0 q_1 + q_2 q_3)} {1 - 2(q_1^2 + q_2^2)} \\ \mbox{arcsin} (2(q_0 q_2 - q_3 q_1)) \\ \mbox{arctan} \frac {2(q_0 q_3 + q_1 q_2)} {1 - 2(q_2^2 + q_3^2)} \end{bmatrix} </math> arctan and arcsin have a result between -Pi/2 and Pi/2. With three rotation between -Pi/2 and Pi/2 you can't have all possible orientations. You need to replace the arctan by atan2 to generate all the orientation. :<math>\begin{bmatrix} \phi \\ \theta \\ \psi \end{bmatrix} = \begin{bmatrix} \mbox{atan2} (2(q_0 q_1 + q_2 q_3),1 - 2(q_1^2 + q_2^2)) \\ \mbox{arcsin} (2(q_0 q_2 - q_3 q_1)) \\ \mbox{atan2} (2(q_0 q_3 + q_1 q_2),1 - 2(q_2^2 + q_3^2)) \end{bmatrix} </math> ==Relationship with Tait-Bryan angles== [[Image:plane.svg|thumb|right|200px|thumb|Tait-Bryan angles for an aircraft]] Similarly for Euler angles, we use the [[Tait-Bryan angles]] (in terms of [[flight dynamics]]): * Roll - <math>\phi</math>: rotation about the X-axis * Pitch - <math>\theta</math>: rotation about the Y-axis * Yaw - <math>\psi</math>: rotation about the Z-axis where the X-axis points forward, Y-axis to the right and Z-axis downward and in the example to follow the rotation occurs in the order yaw, pitch, roll (about body-fixed axes). == Singularities == One must be aware of singularities in the Euler angle parametrization when the pitch approaches <math>\pm</math> 90° (north/south pole). These cases must be handled specially. The common name for this situation is [[gimbal lock]]. Code to handle the singularities is derived on this site: [http://www.euclideanspace.com/maths/geometry/rotations/conversions/quaternionToEuler/ www.euclideanspace.com] ==See also== *[[Rotation operator (vector space)]] *[[Quaternions and spatial rotation]] *[[Euler Angles]] *[[Rotation matrix]] [[Category:Rotational symmetry]] [[Category:Euclidean symmetries]] [[Category:3D computer graphics]] == External links == * [http://www.j3d.org/matrix_faq/matrfaq_latest.html#Q60 Q60. How do I convert Euler rotation angles to a quaternion?] and related questions at The Matrix and Quaternions FAQ</text> </page> <page> <id>8103</id> <title>Convolution power</title> <text>In [[mathematics]], the '''convolution power''' is the ''n''-fold iteration of the [[convolution]] with itself. Thus if <math>x</math> is a [[Function (mathematics)|function]] on [[Euclidean space]] '''R'''<sup>''d''</sup> and <math>n</math> is a [[natural number]], then the convolution power is defined by :<math> x^{*n} = \underbrace{x * x * x * \cdots * x * x}_n,\quad x^{*0}=\delta_0 </math> where '''*''' denotes the convolution operation of functions on '''R'''<sup>''d''</sup> and &delta;<sub>0</sub> is the [[Dirac delta distribution]]. This definition makes sense if ''x'' is an [[integrable]] function (in [[Lp space|L<sup>1</sup>]]), a compactly supported [[distribution (mathematics)|distribution]], or is a finite [[Borel measure]]. If ''x'' is the distribution function of a [[random variable]] on the real line, then the ''n''<sup>th</sup> convolution power of ''x'' gives the distribution function of the sum of ''n'' independent random variables with identical distribution ''x''. The [[central limit theorem]] states that if ''x'' is in L<sup>1</sup> and L<sup>2</sup> with mean zero and variance &sigma;<sup>2</sup>, then :<math>P\left(\frac{x^{*n}}{\sigma\sqrt{n}} < \beta\right) \to \Phi(\beta)\quad\rm{as}\ n\to\infty</math> where &Phi; is the cumulative [[standard normal distribution]] on the real line. Equivalently, <math>x^{*n}/\sigma\sqrt{n}</math> tends weakly to the standard normal distribution. In some cases, it is possible to define powers ''x''<sup>*''t''</sup> for arbitrary real ''t'' > 0. If &mu; is a [[probability measure]], then &mu; is [[Infinite divisibility (probability)|infinitely divisible]] provided there exists, for each positive integer ''n'', a probability measure &mu;<sub>1/''n''</sub> such that :<math>\mu_{1/n}^{* n} = \mu.</math> That is, a measure is infinitely divisible if it is possible to define all ''n''th roots. Not every probability measure is infinitely divisible, and a characterization of infinitely divisible measures is of central importance in the abstract theory of [[stochastic process]]es. Intuitively, a measure should be infinitely divisible provided it has a well-defined "convolution logarithm." The natural candidate for measures having such a logarithm are those of (generalized) [[Poisson process|Poisson]] type, given in the form :<math>\pi_{\alpha,\mu} = e^{-\alpha}\sum_{n=0}^\infty \frac{\alpha^n}{n!}\mu^{*n}.</math> In fact, the [[Lévy–Khinchin theorem]] states that a necessary and sufficient condition for a measure to be infinitely divisible is that it must lie in the closure, with respect 