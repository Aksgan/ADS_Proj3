its complement graph are also modules of <math>G</math>. <math>M</math> is a '''strong module''' of a graph <math>G</math> if it does not overlap any other module of <math>G</math>: <math>\forall M'</math> module of <math>G</math>, either <math>M \cap M' = \emptyset</math> or <math>M \subseteq M'</math> or <math>M' \subseteq M</math>. == Modular quotients and factors == If <math>X</math> and <math>Y</math> are disjoint modules, then it is easy to see that either every member of <math>X</math> is a neighbor of every element of <math>Y</math>, or no member of <math>X</math> is adjacent to any member of <math>Y</math>. Thus, the relationship between two disjoint modules is either ''adjacent'' or ''nonadjacent''. No relationship intermediate between these two extremes can exit. Because of this, '''modular partitions''' of <math>V</math> where each partition class is a module are of particular interest. Suppose <math>P</math> is a modular partition. Since the partition classes are disjoint, their adjacencies constitute a new graph, a '''quotient graph''' <math>G/P</math>, whose vertices are the members of <math>P</math>. That is, each vertex of <math>G/P</math> is a module of G, and the adjacencies of these modules are the edges of <math>G/P</math>. In the figure below, vertex 1, vertices 2 through 4, vertex 5, vertices 6 and 7, and vertices 8 through 11 are a modular partition. In the upper right diagram, the edges between these sets depict the quotient given by this partition, while the edges internal to the sets depict the corresponding factors. The partitions ''{V}'' and <math>\{\{x\}|x \in V\}</math> are the '''trivial modular partitions'''. <math>G/\{V\} </math> is just the one-vertex graph, while <math>G/\{\{x\}|x \in V\}</math> = G. Suppose <math>X</math> is a nontrivial module. Then <math>X</math> and the one-elements subsets of <math>V \backslash X</math> are a nontrivial modular partition of <math>V</math>. Thus, the existence of ''any'' nontrivial modules implies the existence of nontrivial modular partitions. In general, many or all members of <math>P</math> can be nontrivial modules. If ''P'' is a nontrivial modular partition, then ''G/P'' is a compact representation of all the edges that have endpoints in different partition classes of ''P''. For each partition class ''X'' in ''P'', the subgraph ''G[X]'' induced by ''X'' is called a '''factor''' and gives a representation of all edges with both endpoints in ''X''. Therefore, the edges of ''G'' can be reconstructed given only the quotient graph ''G/P'' and its factors. The term ''prime'' graph comes from the fact that a prime graph has only trivial quotients and factors. When ''G[X]'' is a factor of a modular quotient ''G/P'', it is possible that ''G[X]'' can be recursively decomposed into factors and quotients. Each level of the recursion gives rise to a quotient. As a base case, the graph has only one vertex. Collectively, ''G'' can be reconstructed inductively by reconstructing the factors from the bottom up, inverting the steps of the decomposition by combining factors with the quotient at each level. In the figure below, such a recursive decomposition is represented by a tree that depicts one way of recursively decomposing factors of an initial modular partition into smaller modular partitions. A way to recursively decompose a graph into factors and quotients may not be unique. (For example, all subsets of the vertices of a complete graph are modules, which means that there are many different ways of decomposing it recursively.) Some ways may be more useful than others. == The modular decomposition == Fortunately, there exists a such a recursive decomposition of a graph that implicitly represents all ways of decomposing it; this is the modular decomposition. It is itself a way of decomposing a graph recursively into quotients, but it subsumes all others. The decomposition depicted in the figure below is this special decomposition for the given graph. [[Image:ModularDecomposition.png|thumb|300px|A graph, its quotient where "bags" of vertices of the graph correspond to the children of the root of the modular decomposition tree, and its full modular decomposition tree: series nodes are labeled "s", parallel nodes "//" and prime nodes "p".]] The following is a key observation in understanding the modular decomposition: '''If ''X'' is a module of ''G'' and ''Y'' is a subset '''of ''X'', then ''Y'' is a module of ''G'', if and only if it is a module of '''''G[X]'''. In (Gallai, 1967), Gallai defined the modular decomposition recursively on a graph with vertex set ''V'', as follows: # As a base case, if ''G'' only has one vertex, its modular decomposition is a single tree node. # Gallai showed that if ''G'' is connected and so is its complement, then the maximal modules that are proper subsets of ''V'' are a partition of ''V''. They are therefore a modular partition. The quotient that they define is prime. The root of the tree is labeled a ''prime'' node, and these modules are assigned as children of ''V''. Since they are maximal, every module not represented so far is contained in a child ''X'' of ''V''. For each child ''X'' of ''V'', replacing ''X'' with the modular decomposition tree of ''G[X]'' gives a representation of all modules of ''G'', by the key observation above. # If ''G'' is disconnected, its complement is connected. Every union of connected components is a module of ''G''. All other modules are subsets of a single connected component. This represents all modules, except for subsets of connected components. For each component ''X'', replacing ''X'' by the modular decomposition tree of ''G[[X]]'' gives a representation of all modules of ''G'', by the key observation above. The root of the tree is labeled a ''parallel' node, and it is attached in place of ''X'' as a child of the root. The quotient defined by the children is the complement of a complete graph. # If the complement of ''G'' is disconnected, ''G'' is connected. The subtrees that are children of ''V'' are defined in a way that is symmetric with the case where ''G'' is disconnected, since the modules of a graph are the same as the modules of its complement. The root of the tree is labeled a ''serial'' node, and the quotient defined by 